//>>built
require({cache:{"url:rdforms/formulator/ItemEditorTemplate.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"formulatorTable"\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_type"\x3eType:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_type" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_typeDijit" data-dojo-props\x3d"disabled: true"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_id"\x3eId:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_id" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_idDijit" data-dojo-attach-event\x3d"onChange: _changeId" data-dojo-props\x3d"intermediateChanges: true"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_extends"\x3eExtends:\x3c/label\x3e\n            \x3cdiv data-dojo-type\x3d"dojo/dnd/Target" data-dojo-attach-point\x3d"_extends_target" data-dojo-props\x3d"accept: [\'treenode\', \'text\']"\x3e\n                \x3cdiv id\x3d"${id}_extends" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_extendsDijit" data-dojo-attach-event\x3d"onChange: _changeExtends" data-dojo-props\x3d"intermediateChanges: true"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_property"\x3eProperty:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_property" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_propDijit" data-dojo-attach-event\x3d"onChange: _changeProperty" data-dojo-props\x3d"intermediateChanges: true"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_nt"\x3eNodeType:\x3c/label\x3e\x3cdiv\x3e\n            \x3cselect class\x3d"select" name\x3d"select1" data-dojo-type\x3d"dijit/form/Select" id\x3d"${id}_nt" data-dojo-attach-point\x3d"_ntDijit" data-dojo-attach-event\x3d"onChange: _changeNT"\x3e\n                \x3coption value\x3d"LANGUAGE_LITERAL"\x3eLiteral, language mandatory\x3c/option\x3e\n                \x3coption value\x3d"PLAIN_LITERAL"\x3eLiteral, language optional\x3c/option\x3e\n                \x3coption value\x3d"ONLY_LITERAL"\x3eLiteral, language disallowed\x3c/option\x3e\n                \x3coption value\x3d"DATATYPE_LITERAL"\x3eDatatyped literal\x3c/option\x3e\n                \x3coption value\x3d"LITERAL" selected\x3d"selected"\x3eAny kind of literal\x3c/option\x3e\n                \x3coption value\x3d"URI"\x3eURI\x3c/option\x3e\n                \x3coption value\x3d"BLANK"\x3eBlank node\x3c/option\x3e\n                \x3coption value\x3d"RESOURCE"\x3eURI or blank node\x3c/option\x3e\n            \x3c/select\x3e\n        \x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_dt"\x3eDataType:\x3c/label\x3e\x3cdiv\x3e\n            \x3cselect class\x3d"select" data-dojo-type\x3d"dijit/form/ComboBox" id\x3d"${id}_dt" name\x3d"dt" data-dojo-attach-point\x3d"_dtDijit" data-dojo-attach-event\x3d"onChange: _changeDT"\x3e\n                \x3coption selected\x3e\x3c/option\x3e\n                \x3coption\x3ehttp://www.w3.org/2001/XMLSchema#date\x3c/option\x3e\n                \x3coption\x3ehttp://www.w3.org/2001/XMLSchema#duration\x3c/option\x3e\n                \x3coption\x3ehttp://www.w3.org/2001/XMLSchema#decimal\x3c/option\x3e\n                \x3coption\x3ehttp://www.w3.org/2001/XMLSchema#integer\x3c/option\x3e\n                \x3coption\x3ehttp://www.w3.org/2001/XMLSchema#boolean\x3c/option\x3e\n            \x3c/select\x3e\n        \x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_pattern"\x3ePattern:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_pattern" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_patternDijit" data-dojo-attach-event\x3d"onChange: _changePattern" data-dojo-props\x3d"intermediateChanges: true"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel\x3eLabel: \x3cspan data-dojo-attach-point\x3d"_addLabel" class\x3d"addButton"\x3e+\x3c/span\x3e\x3c/label\x3e\x3cdiv\x3e\n            \x3cdiv data-dojo-attach-point\x3d"_labelLangString" data-dojo-type\x3d"rdforms/formulator/LangString"\x3e\x3c/div\x3e\n        \x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel\x3eDescription: \x3cspan data-dojo-attach-point\x3d"_addDesc" class\x3d"addButton"\x3e+\x3c/span\x3e\x3c/label\x3e\x3cdiv\x3e\n            \x3cdiv data-dojo-attach-point\x3d"_descLangString" data-dojo-type\x3d"rdforms/formulator/LangString" data-dojo-props\x3d"multiline: true"\x3e\x3c/div\x3e\n        \x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel\x3eCardinality: \x3c/label\x3e\x3cdiv\x3e\x3cdiv class\x3d"cardinality"\x3e\n            \x3clabel for\x3d"${id}_min"\x3eMin:\x3c/label\x3e\x3cdiv id\x3d"${id}_min" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_minDijit" data-dojo-attach-event\x3d"onChange: _changeCard"\x3e\x3c/div\x3e\n            \x3clabel for\x3d"${id}_pref"\x3ePref:\x3c/label\x3e\x3cdiv id\x3d"${id}_pref" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_prefDijit" data-dojo-attach-event\x3d"onChange: _changeCard"\x3e\x3c/div\x3e\n            \x3clabel for\x3d"${id}_max"\x3eMax:\x3c/label\x3e\x3cdiv id\x3d"${id}_max" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"_maxDijit" data-dojo-attach-event\x3d"onChange: _changeCard"\x3e\x3c/div\x3e\n        \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_constr"\x3eConstraints:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_constr" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"_constrDijit" data-dojo-attach-event\x3d"onChange: _changeConstr" data-dojo-props\x3d"intermediateChanges: true, invalidMessage: \'Must be a valid json string.\'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_cls"\x3eClasses:\x3c/label\x3e\x3cdiv\x3e\x3cdiv id\x3d"${id}_cls" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_clsDijit" data-dojo-attach-event\x3d"onChange: _changeCls" data-dojo-props\x3d"intermediateChanges: true"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"row"\x3e\x3clabel for\x3d"${id}_sty"\x3eStyles:\x3c/label\x3e\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"_stylesWrapper"\x3e\n        \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n'}});
define("rdforms/formulator/ItemEditor","dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/aspect dojo/on dojo/json dojo/dom-construct dijit/_WidgetBase dijit/registry dijit/form/ComboBox rdforms/formulator/LangString rdforms/template/Item dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ToggleButton dojo/dnd/Target dojo/text!./ItemEditorTemplate.html".split(" "),function(c,l,m,e,h,f,n,p,k,w,x,q,r,s,t,y,u){return m([p,r,s],{itemStore:null,storeManager:null,templateString:u,postCreate:function(){this.inherited("postCreate",
arguments);this.lock=!0;var a=this.item.getBundle().isReadOnly();this._styles2Dijit={};for(var b=this.item.getAvailableStyles(),v=c.hitch(this,this._changeStyles),d=0;d<b.length;d++){var g=b[d];this._styles2Dijit[g]=new t({showLabel:!0,disabled:a,checked:this.item.hasStyle(g),onChange:v,label:g,iconClass:"dijitCheckBoxIcon"},n.create("div",null,this._stylesWrapper))}this._typeDijit.set("value",this.item.getType(!0)||"");this._extendsDijit.set("value",this.item.getExtends(!0)||"");this._propDijit.set("value",
this.item.getProperty(!0)||"");this._ntDijit.set("value",this.item.getNodetype(!0)||"");this._dtDijit.set("value",this.item.getDatatype(!0)||"");this._patternDijit.set("value",this.item.getPattern(!0)||"");b=this.item.getCardinality(!0);this._minDijit.set("value",b.min||"");this._prefDijit.set("value",b.pref||"");this._maxDijit.set("value",b.max||"");this._constrDijit.set("value",f.stringify(this.item.getConstraints(!0)||{}));this._clsDijit.set("value",this.item.getClasses(!0).join(", "));setTimeout(c.hitch(this,
function(){this.lock=!1}),200);a?l.forEach("_idDijit _typeDijit _extendsDijit _propDijit _ntDijit _dtDijit _patternDijit _labelLangString _descLangString _minDijit _prefDijit _maxDijit _constrDijit _clsDijit".split(" "),function(a){this[a].set("disabled","true")},this):(a=this.item.getId(!0),null==a?this._idDijit.set("disabled","true"):this._idDijit.set("value",a),this._dtDijit.set("disabled","DATATYPE_LITERAL"!==this.item.getNodetype(!0)),this._patternDijit.set("disabled","ONLY_LITERAL"!==this.item.getNodetype(!0)),
e.before(this._labelLangString,"onChange",c.hitch(this.item,"setLabelMap")),e.after(this._labelLangString,"onChange",c.hitch(this,this.itemChanged)),h(this._addLabel,"click",c.hitch(this._labelLangString,this._labelLangString.add)),e.before(this._descLangString,"onChange",c.hitch(this.item,"setDescriptionMap")),e.after(this._descLangString,"onChange",c.hitch(this,this.itemChanged)),h(this._addDesc,"click",c.hitch(this._descLangString,this._descLangString.add)),this._constrDijit.set("disabled","text"===
this.item.getType(!0)||"URI"!==this.item.getNodetype(!0)&&"RESOURCE"!==this.item.getNodetype(!0)),this._constrDijit.validator=function(a,b){try{return"{}"!==a&&""!==a&&f.parse(a),!0}catch(c){return!1}},this._extends_target.checkAcceptance=function(a,b){return 1===b.length?k.getEnclosingWidget(b[0]).item instanceof q:!1},this._extends_target.onDrop=c.hitch(this,function(a,b,c){a=k.getEnclosingWidget(b[0]);this._extendsDijit.set("value",a.item.getId())}));this._labelLangString.setMap(this.item.getLabelMap(!0));
this._descLangString.setMap(this.item.getDescriptionMap(!0))},itemChanged:function(){this.storeManager.itemChanged(this.item)},_addLangString:function(a,b){},_changeId:function(){this.lock||(this._idTimer&&clearTimeout(this._idTimer),this._idTimer=setTimeout(c.hitch(this,function(){delete this._idTimer;if(!this._destroyed){var a=this.item.getId(),b=this._idDijit.get("value");if(a!==b)try{this.itemStore.renameItem(a,b),this.itemChanged()}catch(c){}}}),200))},_changeExtends:function(){this.lock||(this.item.setExtends(this._extendsDijit.get("value")),
this.itemChanged())},_changeProperty:function(){this.lock||(this.item.setProperty(this._propDijit.get("value")),this.storeManager.itemChanged(this.item))},_changeNT:function(){if(!this.lock){var a=this._ntDijit.get("value");this.item.setNodetype(a);this._dtDijit.set("disabled","DATATYPE_LITERAL"!==a);this._patternDijit.set("disabled","ONLY_LITERAL"!==a);this._constrDijit.set("disabled","text"===this.item.getType(!0)||"URI"!==this.item.getNodetype(!0)&&"RESOURCE"!==this.item.getNodetype(!0));this.itemChanged()}},
_changeDT:function(){this.lock||(this.item.setDatatype(this._dtDijit.get("value")),this.itemChanged())},_changePattern:function(){this.lock||(this.item.setPattern(this._patternDijit.get("value")),this.itemChanged())},_changeCard:function(){if(!this.lock){var a={min:this._minDijit.get("value")||0,pref:this._prefDijit.get("value")||0,max:this._maxDijit.get("value")||-1};-1===a.max&&delete a.max;this.item.setCardinality(a);this.itemChanged()}},_changeConstr:function(){if(!this.lock)try{var a=this._constrDijit.get("value");
if("{}"===a||""===a)this.item.setConstraints();else{var b=f.parse(a);this.item.setConstraints(b)}this.itemChanged()}catch(c){}},_changeCls:function(){if(!this.lock){var a=this._clsDijit.get("value").replace(/[,;:] ?/," ").split(" ");1===a.length&&""===a[0]?this.item.setClasses():this.item.setClasses(a);this.itemChanged()}},_changeStyles:function(){if(!this.lock){for(var a=this.item.getAvailableStyles(),b=[],c=0;c<a.length;c++){var d=a[c];this._styles2Dijit[d].get("checked")&&b.push(d)}this.item.setStyles(b);
this.itemChanged()}}})});
//# sourceMappingURL=ItemEditor.js.map