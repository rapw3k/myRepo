//>>built
define("rdforms/view/Presenter","dojo/_base/declare dojo/_base/kernel dojo/_base/event dojo/on dojo/dom-class dojo/dom-construct dojo/dom-attr ./View ../template/Group ../utils rdforms/model/system".split(" "),function(s,n,v,w,p,e,q,t,u,l,m){var r=s(t,{showLanguage:!0,filterTranslations:!0,styleCls:"rformsPresenter",showNow:function(c,a){return 0<a.length&&!c.hasStyle("invisible")},prepareBindings:function(c,a){var b,d,e,g,h;if(!this.filterTranslations||"LANGUAGE_LITERAL"!==c.getNodetype())return a;
for(h=0;h<a.length;h++){var k=a[h].getLanguage();""===k||void 0===k?b=a[h]:k===n.locale?d=a[h]:-1!==k.indexOf(n.locale)||-1!==n.locale.indexOf(k)?e=a[h]:0===k.indexOf(this.defaultLanguage)&&(g=a[h])}b=d||e||g||b;return void 0!==b?[b]:a},addTable:function(c,a){var b=a.getItem(),d=b.getChildren(),f=e.create("table",{"class":"rformsGroup"},c);e.create("thead",null,f);for(var g=e.create("tr",null,f),h=0;h<d.length;h++){var k=e.create("th",null,g);this.showInfo(b,e.create("span",{innerHTML:d[h].getLabel()},
k))}return f},fillTable:function(c,a){if(0!==a.length){a[0].getItem();var b,d,f,g;for(b=0;b<a.length;b++){f=a[b].getItemGroupedChildBindings();g=e.create("tr",null,c);for(d=0;d<f.length;d++)0<f[d].length?this.addComponent(e.create("td",null,g),f[d][0],!0):e.create("td",null,g)}}},skipBinding:function(c){return c.getItem()instanceof u&&0===c.getChildBindings().length},addLabel:function(c,a,b){c=b.getItem().getLabel();c=null!=c&&""!=c?c.charAt(0).toUpperCase()+c.slice(1):"";q.set(a,"innerHTML",c);p.add(a,
"rformsLabel");this.showInfo(b.getItem(),a)},addGroup:function(c,a){new r({binding:a,topLevel:!1},c)},addText:function(c,a){var b=a.getItem();if("URI"===b.getNodetype())if(b.hasStyle("image"))e.create("img",{"class":"rformsImage",src:a.getValue()},c);else{var d;d=(d=l.getLocalizedMap(a))?e.create("a",{"class":"rformsUrl",title:a.getValue(),href:a.getValue(),innerHTML:l.getLocalizedValue(d).value},c):e.create("a",{"class":"rformsUrl",href:a.getValue(),innerHTML:a.getValue()},c);b.hasStyle("externalLink")?
m.attachExternalLinkBehaviour(d,a):m.attachLinkBehaviour(d,a)}else this.showLanguage&&a.getLanguage()&&(b=e.create("div",{innerHTML:a.getLanguage()},c),p.add(b,"rformsLanguage")),b=a.getValue().replace("\x3c","\x26lt;").replace("\x3e","\x26gt;").replace(/(\r\n|\r|\n)/g,"\x3cbr/\x3e"),e.create("div",{innerHTML:b},c)},addChoice:function(c,a){var b=a.getChoice(),d=a.getItem(),f;b.description&&(f=l.getLocalizedValue(b.description).value);if(d.hasStyle("image"))e.create("img",{"class":"rformsImage",src:b.value,
title:f||b.value},c);else if(d.hasStyle("stars")&&NaN!=parseInt(b.value))for(d=parseInt(b.value);0<d;d--)e.create("span",{"class":"rformsStar"},c);else{var g=e.create("a",{"class":"rformsUrl",href:b.seeAlso||b.value,title:f||b.seeAlso||b.value,innerHTML:l.getLocalizedValue(b.label).value},c);d.hasStyle("externalLink")?m.attachExternalLinkBehaviour(g,a):m.attachLinkBehaviour(g,a);null!=b.load&&b.load(function(){q.add(g,"innerHTML",l.getLocalizedValue(b.label).value)})}}});return r});
//# sourceMappingURL=Presenter.js.map