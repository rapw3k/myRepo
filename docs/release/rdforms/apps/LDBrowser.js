//>>built
require({cache:{"url:rdforms/apps/LDBrowserTemplate.html":'\x3cdiv class\x3d"ldbrowser"\x3e\n  \x3cdiv style\x3d\'height: 100%;position: relative\'\x3e\n      \x3cdiv style\x3d"font-size: large; margin: 0px 5px"\x3e\n          \x3cdiv style\x3d"display: table;width: 100%"\x3e\x3cdiv style\x3d"display: table-row"\x3e\n              \x3cdiv style\x3d"display:table-cell;width:1px;padding-right: 1em"\x3eResource:\x3c/div\x3e\n              \x3cdiv style\x3d"display:table-cell;width: auto"\x3e\n                  \x3cdiv style\x3d"width: 100%;box-sizing: border-box;padding: 0px 5px" data-dojo-type\x3d"dijit/form/TextBox"\n                       data-dojo-attach-point\x3d"textboxURI" data-dojo-props\x3d"trim: true" data-dojo-attach-event\x3d"onKeyPress: _uriKeypress"\x3e\x3c/div\x3e\x3c/div\x3e\n          \x3c/div\x3e\x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv style\x3d"display:none;margin: 5px;" data-dojo-attach-point\x3d"examplesBlock"\x3e\n          \x3cspan\x3eExample resources: \x3c/span\x3e\n          \x3cspan data-dojo-attach-point\x3d"examples"\x3e\x3c/span\x3e\n      \x3c/div\x3e\n      \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"_borderContainer" style\x3d"position:absolute; top: 35px;bottom: 0px; left: 0px; right: 0px"\x3e\n          \x3cdiv data-dojo-type\x3d\'dijit/layout/TabContainer\' data-dojo-attach-point\x3d\'_tabContainer\' data-dojo-props\x3d"region: \'center\'"\x3e\n              \x3cdiv data-dojo-type\x3d\'dijit/layout/ContentPane\' title\x3d\'Browser\' data-dojo-attach-point\x3d\'_presenterTab\'\x3e\n                  \x3cdiv data-dojo-type\x3d"rdforms/view/Presenter" data-dojo-attach-point\x3d"presenter" data-dojo-props\x3d"compact: true"\x3e\x3c/div\x3e\n              \x3c/div\x3e\n              \x3cdiv data-dojo-type\x3d\'rdforms/apps/RDFView\' title\x3d\'RDF data\' data-dojo-attach-point\x3d\'_rdfTab\'\x3e\x3c/div\x3e\n          \x3c/div\x3e\n      \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n'}});
define("rdforms/apps/LDBrowser","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/promise/all dojo/Deferred dojo/request dojo/dom-style dojo/dom-construct dojo/dom-attr dijit/layout/_LayoutWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/layout/TabContainer dijit/layout/ContentPane dijit/layout/BorderContainer dijit/form/TextBox dijit/Dialog dijit/ProgressBar rdforms/model/Engine rdforms/view/Presenter rdforms/apps/RDFView rdforms/model/system rdforms/template/ItemStore rdfjson/Graph rdfjson/formats/converters dojo/hash dojo/topic dojo/keys dojo/io-query dojo/text!./LDBrowserTemplate.html".split(" "),
function(r,e,k,l,s,t,m,n,h,u,v,w,x,H,I,J,K,y,z,p,L,M,A,B,C,D,f,E,F,g,G){return r([v,w,x],{itemStore:null,initialURI:"",exampleURIs:null,type2template:null,pattern2template:null,bundlePaths:null,keyInFragment:"uri",rdf:null,rdfFormat:"rdf/json",graph:null,proxyLoadResourcePattern:null,proxyLoadResourcePattern2:null,loadResourceMessage:"Loading Resource",loadResourceMessage2:"Loading Resource via secondary mechanism",loadResourceFailed:"Failed to load resource",showResource:function(b){this.textboxURI.set("value",
b);this.loadResource(b).then(e.hitch(this,function(c){this._showBrowse(b,c);this._rdfTab.setGraph(c)}))},showOrUpdateLoadProgress:function(b){if(!this._progressDialog){var c=h.create("div",{style:{width:"400px",height:"100px"}});this._progressMessage=h.create("div",{"class":"progressMessage"},c);this._progressBar=new z({value:"infinity",indeterminate:!0},h.create("div",null,c));this._progressDialog=new y;this._progressDialog.setContent(c)}u.set(this._progressMessage,"innerHTML",b);this._progressDialog.show()},
endLoadProgress:function(){this._progressDialog.hide()},failedLoadProgress:function(b){this._progressDialog.hide();alert(this.loadResourceFailed)},loadResource:function(b,c){var a=!0===c?this.proxyLoadResourcePattern2:this.proxyLoadResourcePattern;if(a){var a=e.replace(a,{uri:encodeURIComponent(b)}),d;switch(this.rdfFormat){case "rdf/xml":d={headers:{Accept:"application/rdf+xml"},handleAs:"string"};break;default:d={headers:{Accept:"application/rdf+json"},handleAs:"json"}}this.showOrUpdateLoadProgress(c?
this.loadResourceMessage2:this.loadResourceMessage);return m.get(a,d).then(e.hitch(this,function(b){this.endLoadProgress();return this._convertRDF(b)}),e.hitch(this,function(a){if(!0===c||null==this.proxyLoadResourcePattern2)this.failedLoadProgress();else return this.loadResource(b,!0)}))}if(this.graph)return a=new t,a.resolve(this.graph),a.promise},loadJSON:function(b){return m.get(b,{handleAs:"json"})},suggestedTemplate:function(b,c){if(this.pattern2template)for(var a in this.pattern2template)if(this.pattern2template.hasOwnProperty(a)&&
RegExp(a).test(b))return this.pattern2template[a];if(this.type2template){a=c.find(b,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type");for(var d=0;d<a.length;d++){var q=this.type2template[a[d].getValue()];if(null!=q)return q}}if(this.defaultTemplate)return this.defaultTemplate},templateString:G,_graph:null,_presenterTab:null,_rdfTab:null,postCreate:function(){this.inherited("postCreate",arguments);null==this.itemStore&&(this.itemStore=new B);var b=this,c=function(){A.attachLinkBehaviour=function(a,
c){l(a,"click",function(a){a.preventDefault();a=g.queryToObject(f());a[b.keyInFragment]=c.getValue();f(g.objectToQuery(a))})};var a=function(){var a=g.queryToObject(f());a[b.keyInFragment]?b.showResource(a[b.keyInFragment]):b.initialURI&&(a[b.keyInFragment]=b.initialURI,f(g.objectToQuery(a)))};E.subscribe("/dojo/hashchange",a);setTimeout(a,1)},a=e.hitch(this,function(a){e.mixin(this,this.config,a);this._convertRDF(this.rdf);this.exampleURIs&&(n.set(this.examplesBlock,"display",""),n.set(this._borderContainer.domNode,
"top","55"),k.forEach(this.exampleURIs,function(a){var c=h.create("a",{href:a,innerHTML:a},this.examples);h.create("span",{innerHTML:", "},this.examples);l(c,"click",function(c){c.preventDefault();c=g.queryToObject(f());c[b.keyInFragment]=a;f(g.objectToQuery(c))})},this));null!=this.bundlePaths&&null!=this.bundlePaths?s(k.map(this.bundlePaths,function(a){return this.loadJSON(a)},this)).then(e.hitch(this,function(a){k.forEach(a,function(a,b){this.itemStore.registerBundle({path:this.bundlePaths[b],
source:a})},this);c()})):c()});if(this.configPath){var d=this.configPath.substring(0,this.configPath.lastIndexOf("/"));this.loadJSON(this.configPath).then(function(b){""!==d&&null!=b.bundlePaths&&(b.bundlePaths=k.map(b.bundlePaths,function(a){return d+a}));a(b)})}else a();this.startup()},resize:function(){this.inherited("resize",arguments);this._borderContainer&&this._borderContainer.resize()},_convertRDF:function(b){this.rdf=b;if(null!=this.rdf)switch(this.rdfFormat){case "rdf/json":return this.graph=
new C(this.rdf,!1);case "rdf/xml":return this.graph=D.rdfxml2graph(this.rdf)}},_showBrowse:function(b,c){var a=this.suggestedTemplate(b,c)||[];e.isString(a)&&(a=[a]);a=p.constructTemplate(c,b,this.itemStore,a);a=p.match(c,b,a);this.presenter.show({binding:a})},_uriKeypress:function(b){b.keyCode===F.ENTER&&(b=g.queryToObject(f()),b[this.keyInFragment]=this.textboxURI.get("value"),f(g.objectToQuery(b)))},_loadConfig:function(b){}})});
//# sourceMappingURL=LDBrowser.js.map